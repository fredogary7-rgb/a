<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard - LuminaStar</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* RESET */
* { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins',sans-serif; }
body { background: linear-gradient(135deg,#ff7eb3,#ff758c,#ffb199); min-height:100vh; color:#fff; overflow-x:hidden; }

/* TOPBAR */
.topbar { display:flex; justify-content:space-between; align-items:center; padding:15px; background:rgba(255,255,255,0.15); backdrop-filter:blur(15px); border-bottom:1px solid rgba(255,255,255,0.25); position:sticky; top:0; z-index:1000;}
.topbar .menu-toggle { font-size:24px; cursor:pointer; color:#fff; }
.topbar .user { font-weight:600; font-size:16px; }

/* SIDEBAR */
.sidebar { position:fixed; left:-260px; top:0; height:100%; width:260px; background:rgba(255,255,255,0.20); backdrop-filter:blur(12px); transition:0.4s; padding-top:80px; z-index:999; border-right:1px solid rgba(255,255,255,0.25);}
.sidebar.active { left:0; }
.sidebar a { display:block; padding:14px 25px; font-size:15px; color:#fff; text-decoration:none; transition:0.3s;}
.sidebar a i { margin-right:12px; }
.sidebar a:hover { background: rgba(255,255,255,0.25); }

/* Sous-menus */
.sub-menu { display:none; padding-left:25px; }
.sub-menu a { font-size:14px; padding:10px 25px; }

/* Fl√®che */
.rotate { transform: rotate(180deg); transition:0.3s; }

/* OVERLAY */
.overlay { position:fixed; top:0; left:0; height:100%; width:100%; background:rgba(0,0,0,0.45); opacity:0; visibility:hidden; transition:0.3s; z-index:998;}
.overlay.active { opacity:1; visibility:visible; }

/* MAIN */
.main { padding:20px; }

/* WELCOME BOX */
.welcome-holder { background: linear-gradient(to bottom right, #ffe5d3, #ffdcd2); padding:20px; border-radius:20px; color:#444; margin-bottom:25px; border:1px solid rgba(255,255,255,0.4);}
.welcome-holder h2 { font-size:20px; font-weight:700; margin-bottom:10px;}
.welcome-holder p { font-size:14px; line-height:1.5;}

/* STAT BOXES */
.stat-box {
    margin-top: 15px;
    display: flex;
    justify-content: space-between;
    border-radius: 15px;
    padding: 18px 25px;
    color: #fff;
    font-weight: 600;
    font-size: 18px;
}

.stat-amount {
    font-size: 24px;
    font-weight: 700;
    margin-top: 8px;
}

/* Couleurs personnalis√©es pour les stat boxes */
.red-box { background: linear-gradient(to right, #e53935, #ff6f61); }       /* D√©penses / Prix */
.grey-box { background: linear-gradient(to right, #6b6b6b, #9e9e9e); }     /* Deuxi√®me case */
.lightblue-box { background: linear-gradient(to right, #00c6ff, #0072ff); } /* Troisi√®me case */
.whatsapp-box { background: linear-gradient(to right, #0d47a1, #1976d2); color: #fff; } /* WhatsApp Bleu marine */

.stat-title { font-size: 15px; opacity: 0.9; }

/* FOOTER */
footer { text-align:center; margin-top:30px; opacity:0.8; font-size:13px; }

/* HORAIRES TRENDSTAR */
.schedule-card { margin-top:25px; background:linear-gradient(to bottom right,#ffe5d3,#ffdcd2); border-radius:20px; padding:20px; border:1px solid rgba(255,255,255,0.4); color:#444;}
.schedule-card h3 { font-size:18px; font-weight:700; margin-bottom:15px; }
.schedule-item { display:flex; align-items:center; justify-content:space-between; background:rgba(255,255,255,0.65); border-radius:14px; padding:12px 15px; margin-bottom:12px;}
.schedule-left { display:flex; align-items:center; gap:12px; }
.schedule-icon { width:42px; height:42px; border-radius:12px; display:flex; align-items:center; justify-content:center; color:#fff; font-size:18px; }
.icon-gray { background:#9e9e9e; } .icon-tiktok { background:#ff2d55; } .icon-youtube { background:#ff0000; } .icon-ads { background:#ffb300; } .icon-instagram { background:#8a3ab9; }
.schedule-text strong { display:block; font-size:14px; font-weight:600; }
.schedule-text span { font-size:12px; opacity:0.8; }
.schedule-day { padding:6px 14px; border-radius:20px; font-size:12px; font-weight:600; background:rgba(255,255,255,0.8);}
.day-monday { color:#555; } .day-tuesday { color:#ff2d55; } .day-wednesday { color:#ff0000; } .day-thursday { color:#ffb300; } .day-friday { color:#8a3ab9; }

/* WhatsApp Card */
.whatsapp-box { padding: 18px; border-radius: 18px; margin-top: 20px; border: 1px solid rgba(255,255,255,0.4); }
.whatsapp-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.whatsapp-header strong { font-size: 16px; font-weight: 700; }
.close-icon { font-size: 18px; color: #fff; cursor: pointer; opacity: 0.8; }
.whatsapp-text { font-size: 14px; margin-bottom: 15px; }
.whatsapp-input { width: 100%; padding: 12px; border-radius: 12px; border: none; font-size: 15px; margin-bottom: 10px; background: #fff; }
.whatsapp-btn { width: 100%; background: #0d47a1; color: #fff; padding: 10px; border: none; border-radius: 12px; font-size: 16px; cursor: pointer; }

/* REFERRAL BOX */
.ref-box { background: rgba(255, 255, 255, 0.25); padding: 20px; border-radius: 15px; text-align: center; margin-top: 25px; }
.ref-link-container { display: flex; align-items: center; justify-content: center; gap: 10px; flex-wrap: wrap; }
.ref-link { background: #ffffff; color: #333; padding: 10px; border-radius: 8px; word-break: break-all; font-weight: 600; min-width: 250px; text-align: center; }
.copy-btn { padding: 10px 15px; border: none; border-radius: 8px; background: #ff7a00; color: #fff; font-weight: 600; cursor: pointer; transition: 0.3s; }
.copy-btn:hover { background: #ffb35a; }
/* STAT CARDS */
.stat-card {                                                                            padding: 20px;
    border-radius: 15px;
    color: #fff;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}

.orange-box { background: linear-gradient(to right, #ff7a00, #ffb35a); }
.green-box  { background: linear-gradient(to right, #1dd75f, #65ff3f); }
.blue-box   { background: linear-gradient(to right, #07184d, #15306b); }

.stat-title {
    font-size: 15px;
    opacity: 0.9;
}

.stat-value {
    font-size: 26px;
    font-weight: 700;
    margin-top: 8px;
}
</style>
</head>
<body>

<div class="overlay" id="overlay"></div>

<!-- SIDEBAR -->
<div class="sidebar" id="sidebar">
    <a href="/dashboard"><i class="fa fa-home"></i> Tableau de bord</a>
    <a href="/revenus"><i class="fa fa-wallet"></i> Revenus</a>

    <!-- Nos cha√Ænes -->
    <a href="javascript:void(0);" id="channelsToggle"><i class="fa fa-tv"></i> Nos Cha√Ænes <i class="fa fa-chevron-down" style="float:right;"></i></a>
    <div class="sub-menu" id="subChannels">
        <a href="https://whatsapp.com/channel/0029VbC67Yu6xCSYk45qGs04"><i class="fab fa-whatsapp"></i> WhatsApp</a>
        <a href="https://t.me/nouveau_projet228"><i class="fab fa-telegram"></i> Telegram</a>
        <a href="/nous"><i class="fa fa-envelope"></i> Nous Contactez</a>
    </div>

    <!-- Formation -->
    <a href="javascript:void(0);" id="formationToggle"><i class="fa fa-graduation-cap"></i> Formation <i class="fa fa-chevron-down" style="float:right;"></i></a>
    <div class="sub-menu" id="subFormation">
        <a href="/trade"><i class="fa fa-chart-line"></i> Trading</a>
        <a href="/ecom"><i class="fa fa-store"></i> E-commerce</a>
    </div>

    <!-- T√¢ches -->
    <a href="javascript:void(0);" id="tasksToggle"><i class="fa fa-tasks"></i> T√¢ches <i class="fa fa-chevron-down" style="float:right;"></i></a>
    <div class="sub-menu" id="subTasks">
        <a href="/taches/click-jeudi"><i class="fa fa-hand-pointer"></i> Click Pub</a>
        <a href="/youtube"><i class="fab fa-youtube"></i> Vid√©o YouTube</a>
        <a href="/tiktok"><i class="fab fa-tiktok"></i> Vid√©o TikTok</a>
        <a href="/instagram"><i class="fab fa-instagram"></i> Vid√©o Insta</a>
        <a href="/taches/questions-lundi"><i class="fa fa-question"></i> R√©pondre aux questions</a>
    </div>

    <!-- Retraits -->
    <a href="javascript:void(0);" id="retraitsToggle"><i class="fa fa-money-bill"></i> Retraits <i class="fa fa-chevron-down" style="float:right;"></i></a>
    <div class="sub-menu" id="subRetraits">
        <a href="/retrait"><i class="fa fa-wallet"></i> Solde de retrait</a>
        <a href="{{ url_for('retrait_points_page') }}"><i class="fa fa-coins"></i> Solde des points</a>
        <a href="/mes-retraits"><i class="fa fa-history"></i> Mes retraits</a>
    </div>

    <a href="/wheel"><i class="fa fa-dharmachakra"></i> Roue de la Fortune</a>
    <a href="/profile"><i class="fa fa-user"></i> Mon profile</a>
    <a href="/team"><i class="fa fa-users"></i> Mon √©quipes</a>
    <a href="/download/contact"><i class="fa fa-address-book"></i> Contacts vcf</a>
    <a href="/apk"><i class="fa fa-th"></i> Apk Premium</a>
    <a href="/logout"><i class="fa fa-sign-out"></i> D√©connexion</a>
</div>

<!-- TOPBAR -->
<div class="topbar">
    <div class="menu-toggle" id="menuToggle"><i class="fa fa-bars"></i></div>
    <div class="user">{{ user.username }}</div>
</div>

<!-- MAIN CONTENT -->
<div class="main">
    <div class="welcome-holder">
        <h2>Bienvenue √† nouveau <b>{{ user.username }}</b> !</h2>
        <p>Chez LuminaStar, acc√©dez √† une gamme diversifi√©e de plus de 10 produits num√©riques adapt√©s √† vos besoins. üí∏</p>
    </div>

    <!-- STAT BOXES CONTAINER -->
    <div class="stat-container" style="display:flex; flex-wrap:wrap; gap:15px;">
        <!-- D√©penses / Profit -->
        <div class="stat-box red-box" style="flex:1 1 300px;">
            <div>
                <div class="stat-title">D√©penses</div>
                <div class="stat-amount">XOF {{ user.solde_depot }}</div>
            </div>
            <div>
                <div class="stat-title">Profit</div>
                <div class="stat-amount">XOF {{ user.solde_revenu }}</div>
            </div>
        </div>

        <!-- WhatsApp Box -->
        {% if not user.whatsapp_number %}
        <div class="whatsapp-box" style="flex:1 1 300px;">
            <div class="whatsapp-header">
                <strong>Ajoutez votre WhatsApp</strong>
            </div>
            <p class="whatsapp-text">Veuillez entrer votre num√©ro WhatsApp avec l‚Äôindicatif du pays.</p>
            <form method="POST" action="/whatsapp-number">
                <input type="text" name="number" class="whatsapp-input" placeholder="+228XXXXXXXX" required>
                <button type="submit" class="whatsapp-btn">Enregistrer</button>
            </form>
        </div>
        {% endif %}

        <!-- Commissions Totales -->
        <div class="stat-card orange-box" style="flex:1 1 300px;">
            <div class="stat-title">Solde Actuel</div>
            <div class="stat-value">{{ stats.commissions_total }} XOF</div>
        </div>

        <!-- Points des t√¢ches -->
        <div class="stat-box grey-box" style="flex:1 1 300px;">
            <div>
                <div class="stat-title">Point des t√¢ches</div>
                <div class="stat-amount">{{ user.points or 0 }} pts</div>
            </div>
        </div>

        <!-- Retraits totaux -->
        <div class="stat-box lightblue-box" style="flex:1 1 300px;">
            <div>
                <div class="stat-title">Retraits totaux</div>
                <div class="stat-amount">XOF {{ total_withdrawn_user }}</div>
            </div>
        </div>
    </div>

    <!-- REFERRAL LINK -->
    <div class="ref-box">
        <p>Votre lien de parrainage :</p>
        <div class="ref-link-container">
            <div class="ref-link" id="refLink">{{ referral_link }}</div>
            <button class="copy-btn" onclick="copyReferral()">Copier</button>
        </div>
    </div>

    <!-- HORAIRE TRENDSTAR -->
    <div class="schedule-card">
        <h3>Horaire LuminaStar</h3>

        <div class="schedule-item">
            <div class="schedule-left">
                <div class="schedule-icon icon-gray"><i class="fa fa-question"></i></div>
                <div class="schedule-text">
                    <strong>Questions de culture g√©n√©rale</strong>
                    <span>8h00</span>
                </div>
            </div>
            <div class="schedule-day day-monday">Lundi</div>
        </div>

        <div class="schedule-item">
            <div class="schedule-left">
                <div class="schedule-icon icon-tiktok"><i class="fab fa-tiktok"></i></div>
                <div class="schedule-text">
                    <strong>Vid√©os TikTok</strong>
                    <span>8h00</span>
                </div>
            </div>
            <div class="schedule-day day-tuesday">Mardi</div>
        </div>

        <div class="schedule-item">
            <div class="schedule-left">
                <div class="schedule-icon icon-youtube"><i class="fab fa-youtube"></i></div>
                <div class="schedule-text">
                    <strong>Vid√©os YouTube</strong>
                    <span>8h00</span>
                </div>
            </div>
            <div class="schedule-day day-wednesday">Mercredi</div>
        </div>

        <div class="schedule-item">
            <div class="schedule-left">
                <div class="schedule-icon icon-ads"><i class="fa fa-bullhorn"></i></div>
                <div class="schedule-text">
                    <strong>Clics publicitaires</strong>
                    <span>8h00</span>
                </div>
            </div>
            <div class="schedule-day day-thursday">Jeudi</div>
        </div>

        <div class="schedule-item">
            <div class="schedule-left">
                <div class="schedule-icon icon-instagram"><i class="fab fa-instagram"></i></div>
                <div class="schedule-text">
                    <strong>Vid√©os Instagram</strong>
                    <span>8h00</span>
                </div>
            </div>
            <div class="schedule-day day-friday">Vendredi</div>
        </div>
    </div>

    <footer>2026 ¬© LuminaStar by Nina Academy</footer>

</div>  <script>
function copyReferral() {
    const refLink = document.getElementById("refLink").textContent;
    navigator.clipboard.writeText(refLink).then(() => {
        alert("Lien de parrainage copi√© !");
    }).catch(err => {
        console.error("Erreur copie :", err);
    });
}

const sidebar = document.getElementById("sidebar");
const overlay = document.getElementById("overlay");
const menuToggle = document.getElementById("menuToggle");

// T√¢ches
const tasksToggle = document.getElementById("tasksToggle");
const subTasks = document.getElementById("subTasks");

// Cha√Ænes
const channelsToggle = document.getElementById("channelsToggle");
const subChannels = document.getElementById("subChannels");

// Formation
const formationToggle = document.getElementById("formationToggle");
const subFormation = document.getElementById("subFormation");

// Retraits
const retraitsToggle = document.getElementById("retraitsToggle");
const subRetraits = document.getElementById("subRetraits");

menuToggle.onclick = () => {
    sidebar.classList.add("active");
    overlay.classList.add("active");
};

overlay.onclick = () => {
    sidebar.classList.remove("active");
    overlay.classList.remove("active");
};

// Toggle sous-t√¢ches
tasksToggle.onclick = () => {
    if(subTasks.style.display === "none"){
        subTasks.style.display = "block";
        tasksToggle.querySelector(".fa-chevron-down").classList.add("rotate");
    } else {
        subTasks.style.display = "none";
        tasksToggle.querySelector(".fa-chevron-down").classList.remove("rotate");
    }
};

// Toggle sous-cha√Ænes
channelsToggle.onclick = () => {
    if(subChannels.style.display === "none"){
        subChannels.style.display = "block";
        channelsToggle.querySelector(".fa-chevron-down").classList.add("rotate");
    } else {
        subChannels.style.display = "none";
        channelsToggle.querySelector(".fa-chevron-down").classList.remove("rotate");
    }
};

// Toggle sous-formation
formationToggle.onclick = () => {
    if(subFormation.style.display === "none"){
        subFormation.style.display = "block";
        formationToggle.querySelector(".fa-chevron-down").classList.add("rotate");
    } else {
        subFormation.style.display = "none";
        formationToggle.querySelector(".fa-chevron-down").classList.remove("rotate");
    }
};

// Toggle sous-retraits
retraitsToggle.onclick = () => {
    if(subRetraits.style.display === "none"){
        subRetraits.style.display = "block";
        retraitsToggle.querySelector(".fa-chevron-down").classList.add("rotate");
    } else {
        subRetraits.style.display = "none";
        retraitsToggle.querySelector(".fa-chevron-down").classList.remove("rotate");
    }
};
</script>  </body>
</html>
