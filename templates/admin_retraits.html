<meta name="viewport" content="width=device-width, initial-scale=1.0"><!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - Gestion des retraits</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
body { font-family:'Poppins', sans-serif; margin:0; padding:20px; background:#f3f6f9; }
h2 { margin-bottom:20px; }
.table-container { background:#fff; padding:20px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }

table { width:100%; border-collapse:collapse; margin-top:10px; }
table th, table td { padding:12px; text-align:left; border-bottom:1px solid #ddd; }
table th { background:#333; color:#fff; }

button { padding:8px 12px; border:none; border-radius:6px; cursor:pointer; color:#fff; font-weight:500; }
.valider { background:#28a745; }
.refuser { background:#dc3545; }
button:hover { opacity:0.85; }

.flash { margin-bottom:15px; padding:10px; border-radius:6px; }
.flash.success { background:rgba(40,167,69,0.2); }
.flash.error { background:rgba(220,53,69,0.2); }

</style>
</head>
<body>

<h2>Gestion des demandes de retrait</h2>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="flash {{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

<div class="table-container">
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Utilisateur</th>
        <th>Montant</th>
        <th>Moyen</th>
        <th>Num√©ro</th>
        <th>Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>

      {% for r in retraits %}
      <tr>
        <td>{{ r.id }}</td>
        <td>{{ r.user.username }}</td>
        <td>{{ r.montant }} XOF</td>
        <td>{{ r.payment_method }}</td>
        <td>{{ r.user.phone }}</td>
        <td>{{ r.date_created.strftime("%d/%m/%Y") }}</td>

        <td>
          <a href="/admin/retrait/valider/{{ r.id }}">
            <button class="valider">Valider</button>
          </a>
          <a href="/admin/retrait/refuser/{{ r.id }}">
            <button class="refuser">Refuser</button>
          </a>
        </td>
      </tr>
      {% endfor %}

    </tbody>
  </table>
</div>

</body>
</html>
