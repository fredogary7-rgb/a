<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Liste des dépôts — Admin</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Poppins', sans-serif; background:#f5f5f5; color:#333; padding:20px; }
table { width:100%; border-collapse: collapse; margin-top:20px; }
th, td { padding:10px; border:1px solid #ccc; text-align:center; }
th { background:#ff7a00; color:#fff; }
tr:nth-child(even) { background:#f9f9f9; }
.status-pending { color:orange; font-weight:700; }
.status-valide { color:green; font-weight:700; }
.status-rejete { color:red; font-weight:700; }
</style>
</head>
<body>

<h2>Liste des dépôts</h2>
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Utilisateur</th>
      <th>Nom</th>
      <th>Opérateur</th>
      <th>Pays</th>
      <th>Montant</th>
      <th>Statut</th>
      <th>Date</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for d in depots %}
    <tr>
      <td>{{ d.id }}</td>
      <td>{{ d.phone }}</td>
      <td>{{ d.fullname or '-' }}</td>
      <td>{{ d.operator }}</td>
      <td>{{ d.country }}</td>
      <td>{{ d.montant }}</td>
      <td class="status-{{ d.statut }}">{{ d.statut }}</td>
      <td>{{ d.date.strftime('%d/%m/%Y %H:%M') }}</td>
      <td>
        {% if d.statut == 'pending' %}
          <a href="{{ url_for('valider_depot', depot_id=d.id) }}">Valider</a> |
          <a href="{{ url_for('rejeter_depot', depot_id=d.id) }}">Rejeter</a>
        {% else %}
          -
        {% endif %}
      </td>
    </tr>
    {% else %}
    <tr>
      <td colspan="9">Aucun dépôt pour le moment.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

</body>
</html>
